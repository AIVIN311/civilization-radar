# Civilization Radar — v0.7 Observation Baseline

中文版快速導覽。英文完整說明請看 `README.md`。

## v0.7 — Observation Baseline

v0.7 標誌著 Civilization Radar 進入「觀測模式」。

在此階段，系統的首要目標不是擴張功能、優化分數或追求指標成長，而是確立一個穩定、可重現、可驗證的觀測基準。所有 pipeline、artifact 與 render 輸出，都必須在不改變核心計算邏輯的前提下，保持一致性與可追溯性。

此版本凍結核心演算法（persistence / kernel / gate / scoring）路徑。任何實驗性改動，必須以 artifact-first 的方式引入，並具備安全 fallback。render 層可調整，資料來源可優化，但不得污染 baseline 或改寫既有數學結構。

在 Observation Baseline 階段：
- 正確性優先於速度
- 穩定性優先於創新
- 可解釋性優先於複雜度

所有輸出皆應可回溯至明確 artifact。
任何例外情況不得中斷主流程。

這不是停滯，而是壓縮。
這不是保守，而是建立未來擴張的參考點。

v0.7 是一個基準版本。
未來所有變動，都必須能與它比較。

## For Agents / Baseline Ops

Route lock（唯一入口路線）：
1. `README.md`
2. `AGENTS.md`
3. `docs/ops/RUNBOOK.md`
4. `docs/architecture/OUTPUTS.md` + `docs/metrics/EVAL.md`
5. `docs/tasks/2026-02-12_route-lock.md`

直連：
- `AGENTS.md`
- `docs/ops/BASELINE.md`
- `docs/ops/RUNBOOK.md`

規則：
- Ops 文件 SSOT 在 `docs/ops/*`。
- `ops/*.md` 允許存在，但僅作 tombstone（轉址說明，不承載正文）。
- 執行腳本維持在 `ops/*.ps1`。

## Current Stage

目前狀態：`Observation Baseline`。

核心原則：
- 盡量不做不必要的新功能擴張。
- 以可驗證、可重現為優先。
- 以營運穩定性為主要交付目標。

## Core Pipeline Contract

主要流程命令：

```bash
python run_pipeline_50.py --output-dir output --half-life-days 7 --geo-profile tw --input-snapshots input/snapshots.jsonl
```

主要輸出：
- `output/latest/radar.db`
- `output/latest/dashboard_v04.html`
- `output/latest/reports/eval_quality.json`
- `output/reports/acceptance_latest_<timestamp>.json`

驗收入口：

```bash
python scripts/run_acceptance_v04.py
python scripts/run_acceptance_latest.py
python scripts/run_acceptance_v07.py --skip-v04-hash
```

## Runtime Data Policy

`input/snapshots.jsonl` 為 runtime artifact：
- 由排程收集任務維護。
- 故意不納入 Git 追蹤。
- fixture/sample 仍保留追蹤：
  - `input/snapshots.sample.jsonl`
  - `input/snapshots.geo.sample.jsonl`

## Operations Rhythm

預設節奏（主機時區 Asia/Taipei）：
- Mon-Thu 18:00：`CivilizationRadar-WeekdaySnapshots`
- Fri 18:00：`CivilizationRadar-FridayPromote`
- Daily 19:00（月底自我判斷執行）：`CivilizationRadar-MonthEndPipelineTag`

修復命令：
- `powershell -ExecutionPolicy Bypass -File .\ops\collect_snapshots_weekday.ps1`
- `powershell -ExecutionPolicy Bypass -File .\ops\promote_latest.ps1`
- `powershell -ExecutionPolicy Bypass -File .\ops\month_end_release.ps1`

## Health Checks

最小檢查命令：

```powershell
schtasks /Query /TN "CivilizationRadar-WeekdaySnapshots" /V /FO LIST
schtasks /Query /TN "CivilizationRadar-FridayPromote" /V /FO LIST
schtasks /Query /TN "CivilizationRadar-MonthEndPipelineTag" /V /FO LIST
```

通過條件：
- task `Last Result = 0`
- `output/latest/reports/eval_quality.json` 存在且 `ok = true`
- promote/month-end 後 `output/latest/radar.db` 有刷新
- promote 後出現新的 `output/reports/acceptance_latest_*.json`

## Known Operational Constraints

目前排程仍是互動模式：
- `Logon Mode`: `Interactive only`
- XML `LogonType`: `InteractiveToken`
- `WakeToRun`: 未啟用

後續（`v0.7.1 ops`）會再處理：
- headless 排程模式
- 是否啟用 wake-to-run（依主機政策）

## Documentation Map

建議閱讀順序：
1. `README.md`（英文主文）
2. `AGENTS.md`
3. `docs/ops/RUNBOOK.md`
4. `docs/architecture/OUTPUTS.md` + `docs/metrics/EVAL.md`
5. `docs/tasks/2026-02-12_route-lock.md`

關鍵連結：
- baseline 定義：`docs/ops/BASELINE.md`
- 文件索引：`docs/README.md`
- 狀態/KPI：`CIVILIZATION_RADAR_STATUS.md`
- 發版紀錄：`docs/releases/v0.4.md` 到 `docs/releases/v0.7.md`
